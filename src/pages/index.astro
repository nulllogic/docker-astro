---
import Index from "../layouts/index.astro";
import footer from "../components/footer.astro";

//https://api.github.com/repos/nulllogic/scssleon/branches/master

const response = await fetch(
    "https://api.github.com/repos/nulllogic/scssleon/branches/master",
);
const data = await response.json();
const commit_date =
    typeof data.message === "undefined"
        ? new Date(data.commit.commit.author.date)
        : new Date();
---

<Index>
  <main>
    <div class="welcome">
      <div class="container xxl">
        <h1 class="title">SCSS superpowers.</h1>
        <h2 class="subtitle">Get ready to notice flaws in every product you use, and then reverse-engineer how experts
          make stuff feel
          <code>‘intuitive’</code> and <code>‘easy’</code>.</h2>
      </div>
    </div>
    <div class="github">
      <div class="container">
        <div class="col-md-12">
          <p>
            Latest Commit on GitHub: {
              commit_date.toISOString().replace(/(.*)T(.*)\..*/, "$1 $2")
          }
          </p>
        </div>
      </div>
    </div>
  </main>
</Index>

<style lang="scss">
  @use "sass:list";
  @use "sass:meta";

  @use "../styles/app.scss" as app;
  @use "../styles/scss/mixins.scss" as mixins;

  $welcome-section: (
    --padding: 50px 0,
    background: var(--background),
    padding: var(--padding),
    colors : (
      dark : (
        background: linear-gradient(71.93deg, #001b33 26.34%, #004887 56.72%, #273b49 94.79%)
      )
    )
  );

  @include mixins.generate-component(
      $welcome-section,
      "welcome",
      app.$config,
      app.$theme
  );
</style>