---

// const component = Astro.url.searchParams.get('component') || '';
// const id = Astro.url.searchParams.get('id') || '';
//
// import { getCollection, getEntry } from "astro:content";
// const docsCollection = await getCollection("docs");
// console.log(docsCollection)
// const page = await getEntry(
//     "docs",
//     Astro.params.version.replace(/\./g, "") +
//     "/" +
//     Astro.params.lang +
//     "/" +
//     Astro.params.slug,
// );

import {getCollection, getEntry} from 'astro:content';

export async function getStaticPaths() {
    const docsCollection = await getCollection('docs');
    return docsCollection.map((doc) => {
        const [version, lang, ...slug] = doc.slug.split('/');
        console.log(version, lang, slug.join('/'));
        return {
            params: {
                version: '1.0',
                lang: 'en',
                slug: slug.join('/'),
            },
            props: doc
        }
    })
}

import { experimental_AstroContainer } from "astro/container";
const container = await experimental_AstroContainer.create();
import iFramePreview from "../../components/iframe_preview/index.astro";
const result = await container.renderToResponse(iFramePreview);

---
<div set:html={result} />